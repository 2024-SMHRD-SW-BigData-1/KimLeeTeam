package controller;

import java.util.ArrayList;

import javazoom.jl.player.MP3Player;
import model.MusicDAO;
import model.MusicVO;

public class MusicCon {
    //해당 클래스에서는 기능들을 모두 가지고 오겠습니다
	// view 기능 - 노래 재생, 다음곡 체크, 이전곡 체크, + ....
	
	MP3Player mp3;
	MusicDAO dao; //노래의 정보를 가지고 오기 위해
	ArrayList<MusicVO> music = new ArrayList<>();
	
	//생성자
	public MusicCon() {
		mp3 = new MP3Player();
		dao = new MusicDAO();
		
		music = dao.getData();
	}
	
	
	//노래재생 기능
    public void musicPlay(int index) {
    	mp3.play(music.get(index).getPath());
		System.out.println(music.get(index).getTitle() + " 노래가 재생중 ...");
    }
	
    //다음곡 기능
    public void nextMusic(int index) {
    	
		if (index >= music.size()) {
			index = 0;
		}
	    stopMusic();
		musicPlay(index);
    }
    //이전곡 기능
    public void preMusic(int index) {
    	
		if (index < 0) {
			index = music.size() - 1;
		}
	    stopMusic();
		musicPlay(index);
    }
    
    //종료 하는 코드
    public void stopMusic() {
    	if(mp3.isPlaying()) {
    		mp3.stop();
    	}
    }
    //음악 리스트 return 하는 코드
    public ArrayList<MusicVO> getMusic() {
    	return music;
    }
    
    
    
    
	
}
