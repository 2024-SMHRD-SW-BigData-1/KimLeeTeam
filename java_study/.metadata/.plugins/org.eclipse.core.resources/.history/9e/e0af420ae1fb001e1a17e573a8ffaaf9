package model;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.SQLException;

public class PhoneDAO {
    // dao - data access object
	//        데이터 접근 객체
	
	//클래스 메소드
	
	Connection conn;
	
	public void getConn() {
		
		try {
			Class.forName("oracle.jdbc.driver.OracleDriver");
			
			// 2. 연결 준비
			String user =  "hr" ;
		    String pw =  "hr";
		    String url =  "jdbc:oracle:thin:@localhost:1521:xe";
			
			
			 conn = DriverManager.getConnection(url,user,pw);
			
			if(conn != null) {
				System.out.println("연결성공");
			}else {
				System.out.println("연결실패");
			}
			
		} catch (ClassNotFoundException e) {
			
			e.printStackTrace();
		} catch (SQLException e) {
			
			e.printStackTrace();
		}
		
		
	}
	
     //전화번호 추가기능
	public void insertPhone(String name,String phone_num,int age) {
		getConn();
		
		//쿼리문 작성
		
		String sql ="insert into phone values( ?, ?, ? )";
		
	
		
		
		
		//쿼리문이 지나갈수 있는 통로 - preparedStatement
		// connection
			try {
				PreparedStatement psmt = conn.prepareStatement(sql);
				
				// ? 인자 채워주기
				psmt.setString(1,name);
				psmt.setString(2,phone_num);
				psmt.setInt(3,age);
				//쿼리문 통과 코드 - insert , delete , update
			int row = 	psmt.executeUpdate(); // 실행된 행의 개수
			if(row>0) {
				System.out.println("insert success");
			}else {
				System.out.println("insert fail");
			}
				
			} catch (SQLException e) {
				
				e.printStackTrace();
			}
		
	}
	
	
	
	
	
}
